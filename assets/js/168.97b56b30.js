(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{438:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"添加coding的ssh公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加coding的ssh公钥"}},[s._v("#")]),s._v(" 添加coding的ssh公钥")]),s._v(" "),t("h3",{attrs:{id:"官方文档-https-coding-net-help-docs-repo-ssh-config-html"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#官方文档-https-coding-net-help-docs-repo-ssh-config-html"}},[s._v("#")]),s._v(" 官方文档：https://coding.net/help/docs/repo/ssh/config.html")]),s._v(" "),t("p",[s._v("由于公司部分代码需要迁移至coding管理，要求在原有代码管理仓库下，再配置coding ssh，保持两个代码管理仓库均配置 可用ssh，并对迁移至coding项目进行git源切换。")]),s._v(" "),t("h3",{attrs:{id:"配置coding-ssh-简要流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置coding-ssh-简要流程"}},[s._v("#")]),s._v(" 配置coding ssh 简要流程")]),s._v(" "),t("ol",[t("li",[s._v("打开 git bash 创建 SSH 公私密钥对")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". 创建新的 SSH 私钥与公钥密钥对，输入你的邮箱作为标签，回车\nssh-keygen -m PEM -t ed25519 -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your.email@example.com"')]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". 保存ssh 文件及名称，直接回车即可，也可以换一个名字再回车，如 id_coding\nEnter "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" to save the key "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/Users/你的用户名/.ssh/id_rsa"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Press enter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". 此处直接回车即可；若设置密码，则每次使用 SSH 方式推送代码时都会要求输入密码\nEnter passphrase "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" no passphrase"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  \n\n注意：如果失败，则把ed25519 换成rsa，即：\nssh-keygen -m PEM -t rsa -b "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -C "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"your.email@example.com"')]),s._v("\n\n")])])]),t("p",[s._v("如果刚刚输入的是id_coding 则会生成id_coding(私钥)和id_coding.pub(公钥)，公钥是要放在服务器上")]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("打开 SSH 公钥文件并赋值到 Coding 上")])]),s._v(" "),t("p",[s._v("用记事本打开id_coding.pub(公钥)，也可以用 git bash 使用 cat 命令打开，例如cat ~/.ssh/id_coding.pub。复制到Coding-左下角头像-个人账户设置-SSH 公钥-新增公钥-公钥内容。")]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("如果之前有其他代码管理网站且使用id_ras公私钥对，不想修改之前的，只想添加coding配置，那么接下来是关键的一步。")])]),s._v(" "),t("img",{attrs:{src:s.$withBase("/assets/notes-images/operationsGuide-images/ssh.png"),alt:"ssh",width:"300"}}),s._v(" "),t("p",[s._v("在 c://user/admin/.ssh(ssh所在目录) 下面看看有没config这个文件（注意没有后缀）\n没有则新建一个。这个config文件用途就是用来用于区分哪个仓库用哪个私钥。设置配置如下:")]),s._v(" "),t("div",{staticClass:"language-md extra-class"},[t("pre",{pre:!0,attrs:{class:"language-md"}},[t("code",[s._v("Host "),t("span",{pre:!0,attrs:{class:"token italic"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token content"}},[s._v(".sutpc.com\n    IdentityFile ~/.ssh/id_rsa\n    PreferredAuthentications publickey\n    user SuperMaryer\n    \nHost ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v(".coding.net\n     PreferredAuthentications publickey\n     IdentityFile ~/.ssh/id_coding\n     user SuperMaryer\n")])])]),t("p",[s._v("解释：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Host *.sutpc.com：这个是原来的代码管理网站的git，用的私钥是~/.ssh/id_rsa，如果原来你对应的私钥名称不是这个名字，换成你ssh对应的名称即可")])]),s._v(" "),t("li",[t("p",[s._v("Host *.coding.net：这个是coding的，用的私钥是~/.ssh/id_coding，这个私钥名称就是刚刚建的")])]),s._v(" "),t("li",[t("p",[s._v("user：名字")])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("保存之前，执行以下命令，测试是否配置成功\nssh -vT git@e.coding.net")])]),s._v(" "),t("p",[s._v("配置成功")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/assets/notes-images/operationsGuide-images/ssh2.png"),alt:"ssh",width:"600"}}),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v("如果没有提示成功，可尝试删除同目录下的 known_hosts文件，再试一次")])]),s._v(" "),t("h3",{attrs:{id:"切换git地址至coding"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#切换git地址至coding"}},[s._v("#")]),s._v(" 切换git地址至coding")]),s._v(" "),t("ol",[t("li",[s._v("查看本地代码的远程地址：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote -v \n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("若不为coding源地址，则需要切换，coding 找到该项目-右上角克隆按钮-切换SSH类型-复制地址，输入以下指令：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-url origin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("新的coding地址"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("查看是否切换至coding源地址")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote -v \n")])])]),t("h3",{attrs:{id:"配置小乌龟"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置小乌龟"}},[s._v("#")]),s._v(" 配置小乌龟")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("找到Git所在目录路径。然后根据 Git\\usr\\bin 看是否找到ssh.exe，有的话则复制该路径。")])]),s._v(" "),t("li",[t("p",[s._v("配置小乌龟网络ssh客户端\n右键-设置-网络-ssh 客户端-粘贴ssh.exe路径")])])]),s._v(" "),t("img",{attrs:{src:s.$withBase("/assets/notes-images/operationsGuide-images/ssh3.png"),alt:"ssh",width:"600"}})])}),[],!1,null,null,null);t.default=e.exports}}]);